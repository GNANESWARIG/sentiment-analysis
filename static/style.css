import sys
import json
from vaderSentiment.vaderSentiment import SentimentIntensityAnalyzer

# Read input from PHP (Command-line argument)
if len(sys.argv) > 1:
    input_text = sys.argv[1]
    
    # Perform sentiment analysis using VADER
    analyzer = SentimentIntensityAnalyzer()
    sentiment_score = analyzer.polarity_scores(input_text)
    
    # Determine sentiment based on compound score
    compound = sentiment_score['compound']
    sentiment = "positive" if compound > 0.05 else "negative" if compound < -0.05 else "neutral"
    
    # Return JSON response
    print(json.dumps({"sentiment": sentiment, "score": sentiment_score}))
else:
    print(json.dumps({"error": "No input provided"}))
